{"ast":null,"code":"'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar objectAssign = require('object-assign');\n\nvar isPlainObject = require('is-plain-object');\n\nvar serializeTypes = ['boolean', 'string', 'number'];\n\nvar isBuffer = function isBuffer(obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj);\n};\n\nmodule.exports = function () {\n  return {\n    processOptions: function processOptions(options) {\n      var body = options.body;\n\n      if (!body) {\n        return options;\n      }\n\n      var isStream = typeof body.pipe === 'function';\n      var shouldSerialize = !isStream && !isBuffer(body) && (serializeTypes.indexOf(typeof body === 'undefined' ? 'undefined' : _typeof(body)) !== -1 || Array.isArray(body) || isPlainObject(body));\n\n      if (!shouldSerialize) {\n        return options;\n      }\n\n      return objectAssign({}, options, {\n        body: JSON.stringify(options.body),\n        headers: objectAssign({}, options.headers, {\n          'Content-Type': 'application/json'\n        })\n      });\n    }\n  };\n};","map":{"version":3,"sources":["../../src/middleware/jsonRequest.js"],"names":["objectAssign","require","isPlainObject","serializeTypes","isBuffer","obj","module","processOptions","body","options","isStream","shouldSerialize","Array","JSON","headers"],"mappings":";;;;;;;;AAAA,IAAMA,YAAAA,GAAeC,OAAAA,CAArB,eAAqBA,CAArB;;AACA,IAAMC,aAAAA,GAAgBD,OAAAA,CAAtB,iBAAsBA,CAAtB;;AAEA,IAAME,cAAAA,GAAiB,CAAA,SAAA,EAAA,QAAA,EAAvB,QAAuB,CAAvB;;AACA,IAAMC,QAAAA,GAAW,SAAXA,QAAW,CAAA,GAAA,EAAA;AAAA,SACf,CAAC,CAACC,GAAAA,CAAF,WAAA,IACA,OAAOA,GAAAA,CAAAA,WAAAA,CAAP,QAAA,KADA,UAAA,IAEAA,GAAAA,CAAAA,WAAAA,CAAAA,QAAAA,CAHe,GAGfA,CAHe;AAAjB,CAAA;;AAKAC,MAAAA,CAAAA,OAAAA,GAAiB,YAAA;AAAA,SAAO;AACtBC,IAAAA,cAAAA,EAAgB,SAAA,cAAA,CAAA,OAAA,EAAW;AACzB,UAAMC,IAAAA,GAAOC,OAAAA,CAAb,IAAA;;AACA,UAAI,CAAJ,IAAA,EAAW;AACT,eAAA,OAAA;AACD;;AAED,UAAMC,QAAAA,GAAW,OAAOF,IAAAA,CAAP,IAAA,KAAjB,UAAA;AACA,UAAMG,eAAAA,GACJ,CAAA,QAAA,IACA,CAACP,QAAAA,CADD,IACCA,CADD,KAECD,cAAAA,CAAAA,OAAAA,CAAAA,OAAAA,IAAAA,KAAAA,WAAAA,GAAAA,WAAAA,GAAAA,OAAAA,CAAAA,IAAAA,CAAAA,MAAwC,CAAxCA,CAAAA,IAA8CS,KAAAA,CAAAA,OAAAA,CAA9CT,IAA8CS,CAA9CT,IAAqED,aAAAA,CAHxE,IAGwEA,CAFtE,CADF;;AAKA,UAAI,CAAJ,eAAA,EAAsB;AACpB,eAAA,OAAA;AACD;;AAED,aAAO,YAAA,CAAA,EAAA,EAAA,OAAA,EAA0B;AAC/BM,QAAAA,IAAAA,EAAMK,IAAAA,CAAAA,SAAAA,CAAeJ,OAAAA,CADU,IACzBI,CADyB;AAE/BC,QAAAA,OAAAA,EAAS,YAAA,CAAA,EAAA,EAAiBL,OAAAA,CAAjB,OAAA,EAAkC;AACzC,0BAAgB;AADyB,SAAlC;AAFsB,OAA1B,CAAP;AAMD;AAvBqB,GAAP;AAAjBH,CAAAA","sourcesContent":["const objectAssign = require('object-assign')\nconst isPlainObject = require('is-plain-object')\n\nconst serializeTypes = ['boolean', 'string', 'number']\nconst isBuffer = obj =>\n  !!obj.constructor &&\n  typeof obj.constructor.isBuffer === 'function' &&\n  obj.constructor.isBuffer(obj)\n\nmodule.exports = () => ({\n  processOptions: options => {\n    const body = options.body\n    if (!body) {\n      return options\n    }\n\n    const isStream = typeof body.pipe === 'function'\n    const shouldSerialize =\n      !isStream &&\n      !isBuffer(body) &&\n      (serializeTypes.indexOf(typeof body) !== -1 || Array.isArray(body) || isPlainObject(body))\n\n    if (!shouldSerialize) {\n      return options\n    }\n\n    return objectAssign({}, options, {\n      body: JSON.stringify(options.body),\n      headers: objectAssign({}, options.headers, {\n        'Content-Type': 'application/json'\n      })\n    })\n  }\n})\n"]},"metadata":{},"sourceType":"script"}